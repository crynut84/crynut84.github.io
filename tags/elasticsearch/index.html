
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="전호진 블로그">
    <title>Tag: elasticsearch - 전호진 블로그</title>
    <meta name="author" content="Hojin Jun">
    
    
        <link rel="icon" href="https://crynut84.github.io/assets/images/favicon.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="개발하다 마주치는 사소한 일들..">
<meta property="og:type" content="blog">
<meta property="og:title" content="전호진 블로그">
<meta property="og:url" content="https://crynut84.github.io/tags/elasticsearch/index.html">
<meta property="og:site_name" content="전호진 블로그">
<meta property="og:description" content="개발하다 마주치는 사소한 일들..">
<meta property="og:locale" content="ko">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="전호진 블로그">
<meta name="twitter:description" content="개발하다 마주치는 사소한 일들..">
<meta name="twitter:creator" content="@crynut84">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/3b2b21d1b33d50542a9c5642c6b5d64d?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-63739974-1', 'auto');
        ga('send', 'pageview');
    </script>


        
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">전호진 블로그</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/3b2b21d1b33d50542a9c5642c6b5d64d?s=90" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/3b2b21d1b33d50542a9c5642c6b5d64d?s=110" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Hojin Jun</h4>
                
                    <h5 class="sidebar-profile-bio"></h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/crynut84" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.facebook.com/hojin.jun" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/11/03/install-elasticsearch-5-0/">
                            Ubuntu 16.04에  elasticsearch v5.0 설치하기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-11-03T09:24:05+09:00">
	
		    2016-11-03
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/elasticsearch/">elasticsearch</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h2 id="elasticsearch-v5-0-설치-가이드"><a href="#elasticsearch-v5-0-설치-가이드" class="headerlink" title="elasticsearch v5.0 설치 가이드"></a>elasticsearch v5.0 설치 가이드</h2><p>elasticsearch는  <code>lucene</code> 기반의 실시간 검색을 제공하는 분산 검색엔진이다. 검색 기능뿐만 아니라 강력한 집계 기능을 제공해 실시간 분석 엔진으로도 활용 가능하며, 데이터를 저장할 수 있어 NoSQL 저장소로도 활용할 수 있다. 넷플릭스(Netflix), 깃허브(Github), 위키피디아(Wikipedia) 등 잘 알려진 사이트에서도 검색, 로그, 분석 등 다양한 용도로 클러스터를 운영하고 있다.</p>
<p>이 문서는 elasticsearch v5.0을 Azure 가상머신(Ubuntu 16.04 LTS) 버전에 설치하기 위한 가이드이다.</p>
<blockquote>
<p>설치 정보는 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup.html" target="_blank" rel="noopener">elasticsearch document</a> site를 참고함.</p>
</blockquote>
<h2 id="사전준비"><a href="#사전준비" class="headerlink" title="사전준비"></a>사전준비</h2><h3 id="Java-JVM"><a href="#Java-JVM" class="headerlink" title="Java(JVM)"></a>Java(JVM)</h3><p>elasticsearch는  Java로 구현되어있으며, 구동을 위해서는 <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">Java 8</a>이 필요한데 Oracle’s Java와 openJDK만을 지원한다. 또한 elasticsearch를 분산서버에 구축할 경우 <strong>모든 node는 같은 버전의 Java</strong>를 사용해야한다.</p>
<p>Java 버전은 <em>1.8.0_73 또는 그 이상</em>을 권장한다. 다른 버전의 자바를 설치 할 경우 구동이 안될 수 있다. elasticsearch는 <code>JAVA_HOME</code> 환경변수에 지정된 Java version을 사용한다.</p>
<h4 id="Ubuntu에-Java-8-설치"><a href="#Ubuntu에-Java-8-설치" class="headerlink" title="Ubuntu에 Java 8  설치"></a>Ubuntu에 Java 8  설치</h4><p><code>apt-get</code>을 사용한 설치방법이 가장 쉽다. apt-get은 package의 repository에서 package를 검색/설치할 수 있는 패키지매니저이다.<br>java8은 azure ubuntu의 기본저장된 reposigory에서는 설치할 수 없으므로 <code>webupd8team</code>의 Java PPA repository를  먼저 추가 후 설치한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo add-apt-repository ppa:webupd8team/java</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install oracle-java8-installer</span><br></pre></td></tr></table></figure>
<h4 id="Java-설치-검증"><a href="#Java-설치-검증" class="headerlink" title="Java 설치 검증"></a>Java 설치 검증</h4><p>java 설치가 완료되면<code>java -version</code> 명령어로 Java가 정상적으로 설치 되었는지 elasticsearch에서 요구하는 <code>1.8.0_73</code>이상의 버전이 설치되었는지 확인합한다. (2016년 11월 3일 기준 <code>1.8.0.111</code> 버전이 설치됨)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ java -version</span><br><span class="line">java version <span class="string">"1.8.0_111"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_111-b14)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.111-b14, mixed mode)</span><br></pre></td></tr></table></figure>
<h2 id="Debian-package를-이용한-elasticsearch-설치"><a href="#Debian-package를-이용한-elasticsearch-설치" class="headerlink" title="Debian package를 이용한 elasticsearch 설치"></a>Debian package를 이용한 elasticsearch 설치</h2><p>우리는 Debian 계열의 리눅스인 Ubuntu를 사용하므로 Debian package를 이용하여 설치한다.<br>패키지는 elasticsearch 사이트에서 <a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="noopener">다운로드</a>받거나 APT repository를 이용해 설치 할 수 있다.</p>
<h3 id="PGP-Key-다운로드"><a href="#PGP-Key-다운로드" class="headerlink" title="PGP Key 다운로드"></a>PGP Key 다운로드</h3><p>elasticsearch는 PGP Key를 이용하여 패키지를 암호화해 놓았으므로 아래의 방법으로 <code>public signing key</code>를 다운로드 후 설치한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -</span><br></pre></td></tr></table></figure></p>
<h3 id="APT-Repository를-이용하여-설치"><a href="#APT-Repository를-이용하여-설치" class="headerlink" title="APT Repository를 이용하여 설치"></a>APT Repository를 이용하여 설치</h3><p>APT를 이용하여 설치하려면 <code>apt-transport-https</code>라는 패키지가 필요한데 설치하지 않은 경우 아래와 같이 설치한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install apt-transport-https</span><br></pre></td></tr></table></figure></p>
<p>repository의 정보를 <code>/etc/apt/sources.list.d/elastic-5.x.list</code> 파일에 기록한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"deb https://artifacts.elastic.co/packages/5.x/apt stable main"</span> | sudo tee -a /etc/apt/sources.list.d/elastic-5.x.list</span><br></pre></td></tr></table></figure></p>
<p>이제 아래 명령어를 이용해 elasticsearch를 설치한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update &amp;&amp; sudo apt-get install elasticsearch</span><br></pre></td></tr></table></figure></p>
<h2 id="시작프로그램으로-등록"><a href="#시작프로그램으로-등록" class="headerlink" title="시작프로그램으로 등록"></a>시작프로그램으로 등록</h2><p>elasticsearch의 시작과 중지는 시스템에 따라 SysV <code>init</code>이나 <code>sysemd</code>를 통해 관리된다. 자신의 시스템이 어떤 것을 사용하는지 보려면 아래 명령어로 확인 가능합니다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ps -p 1</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">    1 ?        00:00:08 systemd</span><br></pre></td></tr></table></figure></p>
<p>Ubuntu 16.04 LTS의 경우 <code>systemd</code>를 사용하는것을 알 수 있다.</p>
<h3 id="systemd-를-사용한-elasticsearch-시작프로그램-등록"><a href="#systemd-를-사용한-elasticsearch-시작프로그램-등록" class="headerlink" title="systemd 를 사용한 elasticsearch 시작프로그램 등록"></a><code>systemd</code> 를 사용한 elasticsearch 시작프로그램 등록</h3><p>시스템 시작 시 elasticsearch가 시작될 수 있도록 하려면 아래의 명령어를 실행한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /bin/systemctl daemon-reload</span><br><span class="line">$ sudo /bin/systemctl <span class="built_in">enable</span> elasticsearch.service</span><br></pre></td></tr></table></figure></p>
<p>아래 명령어를 이용해 수동으로 켜고 끌 수 있다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl start elasticsearch.service</span><br><span class="line">$ sudo systemctl stop elasticsearch.service</span><br></pre></td></tr></table></figure></p>
<p>위의 명령어는 elsaticsearch가 잘 구동되었는지 혹은 잘 멈추었는지에 대한 정보를 화면에 표시하지 않는다.<br>정보를 보려면 로그 파일을 확인하면 된다.</p>
<blockquote>
<p>로그 파일 경로 : /var/log/elasticsearch/</p>
</blockquote>
<h3 id="init-를-사용한-elasticsearch-시작프로그램-등록"><a href="#init-를-사용한-elasticsearch-시작프로그램-등록" class="headerlink" title="init 를 사용한 elasticsearch 시작프로그램 등록"></a><code>init</code> 를 사용한 elasticsearch 시작프로그램 등록</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo update-rc.d elasticsearch defaults 95 10</span><br></pre></td></tr></table></figure>
<p>아래 명령어를 이용해 수동으로 켜고 끌 수 있다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo -i service elasticsearch start</span><br><span class="line">$ sudo -i service elasticsearch stop</span><br></pre></td></tr></table></figure></p>
<h2 id="잘-실행-되었는지-확인"><a href="#잘-실행-되었는지-확인" class="headerlink" title="잘 실행 되었는지 확인"></a>잘 실행 되었는지 확인</h2><p>elasticsearch node가 실행 중인지 HTTP 요청으로 알아볼 수 있다. (default port: 9200)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ curl localhost:9200</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"zBrsnqs"</span>,</span><br><span class="line">  <span class="string">"cluster_name"</span> : <span class="string">"elasticsearch"</span>,</span><br><span class="line">  <span class="string">"cluster_uuid"</span> : <span class="string">"27nbRlqPSJuLLtnKCzB7wQ"</span>,</span><br><span class="line">  <span class="string">"version"</span> : &#123;</span><br><span class="line">    <span class="string">"number"</span> : <span class="string">"5.0.0"</span>,</span><br><span class="line">    <span class="string">"build_hash"</span> : <span class="string">"253032b"</span>,</span><br><span class="line">    <span class="string">"build_date"</span> : <span class="string">"2016-10-26T05:11:34.737Z"</span>,</span><br><span class="line">    <span class="string">"build_snapshot"</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"lucene_version"</span> : <span class="string">"6.2.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="환경설정"><a href="#환경설정" class="headerlink" title="환경설정"></a>환경설정</h2><p>elasticsearch 기본 설정 파일은 <code>/etc/elasticsearch/elasticsearch.yml</code>에 위치하는데  설정에 대한 자세한 설명은 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/settings.html" target="_blank" rel="noopener">여기</a>를 참조하면 된다.</p>
<p>Debian package의 경우 시스템 환경설정 파일(`/etc/default/elasticsearch’)도 존재한다.<br><img src="https://cloud.githubusercontent.com/assets/5028400/19964440/042d7f4c-a205-11e6-99df-d5203c260028.png" alt="image"></p>
<h2 id="Debian-package의-디렉터리-구조"><a href="#Debian-package의-디렉터리-구조" class="headerlink" title="Debian package의 디렉터리 구조"></a>Debian package의 디렉터리 구조</h2><p>데비안 패키지의 설정, 로그, 데이터 디렉터리에 대한 설명이다.<br><img src="https://cloud.githubusercontent.com/assets/5028400/19964485/4514547c-a205-11e6-84e5-387cca035bba.png" alt="image"></p>
<blockquote>
<p>Production server에는 다음 설정이 꼭 들어가야함.<br><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html#dev-vs--prod" target="_blank" rel="noopener">Important System Configuration</a></p>
</blockquote>
<h2 id="JVM-메모리-설정"><a href="#JVM-메모리-설정" class="headerlink" title="JVM 메모리 설정"></a>JVM 메모리 설정</h2><p>elasticsearch v5.0부터 메모리 설정이 <code>/etc/init.d/elasticsearch</code>에서  <code>/etc/elasticsaerch/jvm.options</code>로 옮겨졌다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">참고: For the current version of elastic (5.0) you can configure jvm </span><br><span class="line">startup options in the jvm.options file usually located under directory</span><br><span class="line">/etc/elasticsearch/jvm.options:</span><br><span class="line"></span><br><span class="line">-Xms1g -Xmx1g</span><br></pre></td></tr></table></figure></p>

                    
                        

                    
                    
                        <p>
                            <a href="/2016/11/03/install-elasticsearch-5-0/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Hojin Jun. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/3b2b21d1b33d50542a9c5642c6b5d64d?s=110" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Hojin Jun</h4>
        
            <div id="about-card-bio"></div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>programmer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                seoul
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->


    </body>
</html>
